{"ast":null,"code":"import _regeneratorRuntime from\"/home/live/visualstudio/chatbot_react/chatbot_django_react/chatbot-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"/home/live/visualstudio/chatbot_react/chatbot_django_react/chatbot-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/home/live/visualstudio/chatbot_react/chatbot_django_react/chatbot-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/live/visualstudio/chatbot_react/chatbot_django_react/chatbot-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import ChatbotApp from'./ChatbotApp';import React,{useState,useEffect,useRef}from'react';import{BrowserRouter as Router,Route,Routes,useNavigate}from'react-router-dom';import axios from'axios';import styles from'../styles/Chatbot.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Chatbot=function Chatbot(){var inputRef=useRef(null);var lastMessageRef=useRef(null);var navigate=useNavigate();var _useState=useState([{text:'¡Bienvenido al chatbot!',sender:'bot'}]),_useState2=_slicedToArray(_useState,2),messages=_useState2[0],setMessages=_useState2[1];var messagesContainerRef=useRef(null);var scrollToBottom=function scrollToBottom(){if(lastMessageRef.current){lastMessageRef.current.scrollIntoView({behavior:'smooth'});}};useEffect(function(){scrollToBottom();},[messages]);var handleSendMessage=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var inputMessage,messageWithLineBreak,botResponse;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:event.preventDefault();inputMessage=event.target.message.value.trim();if(!(inputMessage!=='')){_context.next=16;break;}messageWithLineBreak=inputMessage+'\\n';setMessages(function(prevMessages){return[].concat(_toConsumableArray(prevMessages),[{text:messageWithLineBreak,sender:'user'}]);});event.target.reset();_context.prev=6;_context.next=9;return sendMessageToBackend(inputMessage);case 9:botResponse=_context.sent;setMessages(function(prevMessages){return[].concat(_toConsumableArray(prevMessages),[{text:botResponse+'\\n',sender:'bot'}]);});_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](6);console.error(_context.t0);case 16:case\"end\":return _context.stop();}},_callee,null,[[6,13]]);}));return function handleSendMessage(_x){return _ref.apply(this,arguments);};}();var sendMessageToBackend=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(message){var response,botResponse;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.post('http://localhost:8000/chat/send-message/',{message:message});case 3:response=_context2.sent;if(!(response.status===200)){_context2.next=11;break;}botResponse=response.data.message;if(!botResponse){_context2.next=10;break;}return _context2.abrupt(\"return\",botResponse);case 10:console.error('La respuesta del bot no tiene una propiedad \"message\"');case 11:_context2.next=16;break;case 13:_context2.prev=13;_context2.t0=_context2[\"catch\"](0);console.error(_context2.t0);case 16:case\"end\":return _context2.stop();}},_callee2,null,[[0,13]]);}));return function sendMessageToBackend(_x2){return _ref2.apply(this,arguments);};}();var handleRedirect=function handleRedirect(){navigate('/ChatbotApp');};return/*#__PURE__*/_jsxs(\"div\",{className:styles['chatbot-container'],children:[/*#__PURE__*/_jsx(\"div\",{className:styles['messages-container-wrapper'],children:/*#__PURE__*/_jsxs(\"div\",{id:\"messages-container\",className:styles['messages-container'],ref:messagesContainerRef,children:[messages.map(function(message,index){return/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(styles['message'],\" \").concat(message.sender==='user'?styles['user']:styles['bot']),style:{backgroundColor:message.color},ref:index===messages.length-1?lastMessageRef:null,children:/*#__PURE__*/_jsx(\"span\",{className:\"\".concat(styles['message-text'],\" \").concat(message.sender==='bot'?styles['typing-animation']:''),children:message.text})},index);}),/*#__PURE__*/_jsx(\"div\",{ref:lastMessageRef})]})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSendMessage,children:[/*#__PURE__*/_jsx(\"input\",{ref:inputRef,type:\"text\",name:\"message\",placeholder:\"Escribe un mensaje...\",autoFocus:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Enviar\"})]}),/*#__PURE__*/_jsx(\"div\",{className:styles['input-group-space']}),/*#__PURE__*/_jsx(\"button\",{className:\"\".concat(styles['button-goto-chatbot']),onClick:handleRedirect,children:\"Ir a ChatbotApp\"})]});};var App=function App(){return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(\"div\",{className:styles['App'],children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Chatbot\"}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Chatbot,{})}),/*#__PURE__*/_jsx(Route,{path:\"/ChatbotApp\",element:/*#__PURE__*/_jsx(ChatbotApp,{})})]})]})});};export default App;","map":{"version":3,"names":["ChatbotApp","React","useState","useEffect","useRef","BrowserRouter","Router","Route","Routes","useNavigate","axios","styles","jsx","_jsx","jsxs","_jsxs","Chatbot","inputRef","lastMessageRef","navigate","_useState","text","sender","_useState2","_slicedToArray","messages","setMessages","messagesContainerRef","scrollToBottom","current","scrollIntoView","behavior","handleSendMessage","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","event","inputMessage","messageWithLineBreak","botResponse","wrap","_callee$","_context","prev","next","preventDefault","target","message","value","trim","prevMessages","concat","_toConsumableArray","reset","sendMessageToBackend","sent","t0","console","error","stop","_x","apply","arguments","_ref2","_callee2","response","_callee2$","_context2","post","status","data","abrupt","_x2","handleRedirect","className","children","id","ref","map","index","style","backgroundColor","color","length","onSubmit","type","name","placeholder","autoFocus","onClick","App","path","element"],"sources":["/home/live/visualstudio/chatbot_react/chatbot_django_react/chatbot-app/src/components/App.jsx"],"sourcesContent":["import ChatbotApp from './ChatbotApp';\nimport React, { useState, useEffect, useRef } from 'react';\nimport { BrowserRouter as Router, Route, Routes, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport styles from '../styles/Chatbot.module.css';\n\nconst Chatbot = () => {\n  const inputRef = useRef(null);\n  const lastMessageRef = useRef(null);\n  const navigate = useNavigate();\n  const [messages, setMessages] = useState([{ text: '¡Bienvenido al chatbot!', sender: 'bot' }]);\n  const messagesContainerRef = useRef(null);\n\n  const scrollToBottom = () => {\n    if (lastMessageRef.current) {\n      lastMessageRef.current.scrollIntoView({ behavior: 'smooth' });\n    }\n  };\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  const handleSendMessage = async (event) => {\n    event.preventDefault();\n    const inputMessage = event.target.message.value.trim();\n    if (inputMessage !== '') {\n      const messageWithLineBreak = inputMessage + '\\n';\n      setMessages((prevMessages) => [...prevMessages, { text: messageWithLineBreak, sender: 'user' }]);\n      event.target.reset();\n\n      try {\n        const botResponse = await sendMessageToBackend(inputMessage);\n        setMessages((prevMessages) => [...prevMessages, { text: botResponse + '\\n', sender: 'bot' }]);\n      } catch (error) {\n        console.error(error);\n      }\n\n    }\n  };\n\n  const sendMessageToBackend = async (message) => {\n    try {\n      const response = await axios.post('http://localhost:8000/chat/send-message/', { message });\n      if (response.status === 200) {\n        const botResponse = response.data.message;\n        if (botResponse) {\n          return botResponse;\n        } else {\n          console.error('La respuesta del bot no tiene una propiedad \"message\"');\n        }\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const handleRedirect = () => {\n    navigate('/ChatbotApp');\n  };\n\n  return (\n    <div className={styles['chatbot-container']}>\n      <div className={styles['messages-container-wrapper']}>\n        <div id=\"messages-container\" className={styles['messages-container']} ref={messagesContainerRef}>\n          {messages.map((message, index) => (\n            <div\n              key={index}\n              className={`${styles['message']} ${message.sender === 'user' ? styles['user'] : styles['bot']}`}\n              style={{ backgroundColor: message.color }}\n              ref={index === messages.length - 1 ? lastMessageRef : null}\n            >\n              <span\n                className={`${styles['message-text']} ${message.sender === 'bot' ? styles['typing-animation'] : ''}`}\n              >\n                {message.text}\n              </span>\n            </div>\n          ))}\n          <div ref={lastMessageRef}></div>\n        </div>\n      </div>\n      <form onSubmit={handleSendMessage}>\n        <input\n          ref={inputRef}\n          type=\"text\"\n          name=\"message\"\n          placeholder=\"Escribe un mensaje...\"\n          autoFocus\n        />\n        <button type=\"submit\">\n          Enviar\n        </button>\n      </form>\n      <div className={styles['input-group-space']}></div>\n      <button className={`${styles['button-goto-chatbot']}`} onClick={handleRedirect}>\n        Ir a ChatbotApp\n      </button>\n    </div>\n  );\n};\n\nconst App = () => {\n  return (\n    <Router>\n      <div className={styles['App']}>\n        <h1>Chatbot</h1>\n        <Routes>\n          <Route path=\"/\" element={<Chatbot />} />\n          <Route path=\"/ChatbotApp\" element={<ChatbotApp />} />\n        </Routes>\n      </div>\n    </Router>\n  );\n};\n\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}