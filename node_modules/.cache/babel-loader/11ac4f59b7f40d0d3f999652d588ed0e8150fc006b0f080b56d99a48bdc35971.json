{"ast":null,"code":"import _regeneratorRuntime from\"/home/live/visualstudio/chatbot_react/chatbot_django_react/chatbot-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"/home/live/visualstudio/chatbot_react/chatbot_django_react/chatbot-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/home/live/visualstudio/chatbot_react/chatbot_django_react/chatbot-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/live/visualstudio/chatbot_react/chatbot_django_react/chatbot-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import ChatbotApp from'./ChatbotApp';import React,{useState,useEffect,useRef}from'react';import{BrowserRouter as Router,Route,Routes,useNavigate}from'react-router-dom';import styles from'./styles/Chatbot.module.css';import axios from'axios';import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var TypingText=function TypingText(_ref){var text=_ref.text;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),displayText=_useState2[0],setDisplayText=_useState2[1];useEffect(function(){var currentIndex=0;var typingTimer=setInterval(function(){setDisplayText(function(prevText){if(currentIndex>=text.length){clearInterval(typingTimer);return prevText;}currentIndex++;return text.substring(0,currentIndex);});},100);return function(){clearInterval(typingTimer);};},[text]);return/*#__PURE__*/_jsx(_Fragment,{children:displayText});};var Chatbot=function Chatbot(){var navigate=useNavigate();var _useState3=useState([{text:'¡Bienvenido al chatbot!',sender:'bot'}]),_useState4=_slicedToArray(_useState3,2),messages=_useState4[0],setMessages=_useState4[1];var messagesContainerRef=useRef(null);var handleSendMessage=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var inputMessage,messageWithLineBreak;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:event.preventDefault();inputMessage=event.target.message.value;if(!(inputMessage.trim()!=='')){_context.next=14;break;}messageWithLineBreak=inputMessage+'\\n';setMessages([].concat(_toConsumableArray(messages),[{text:messageWithLineBreak,sender:'user'}]));event.target.reset();_context.prev=6;_context.next=9;return sendMessageToBackend(inputMessage);case 9:_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](6);console.error(_context.t0);case 14:case\"end\":return _context.stop();}},_callee,null,[[6,11]]);}));return function handleSendMessage(_x){return _ref2.apply(this,arguments);};}();var sendMessageToBackend=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(message){var response,botResponse;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.post('http://localhost:8000/chat/send-message/',{message:message});case 3:response=_context2.sent;if(response.status===200){botResponse=response.data.message;if(botResponse){setMessages(function(prevMessages){return[].concat(_toConsumableArray(prevMessages),[{text:botResponse,sender:'bot'}]);});}else{console.error('La respuesta del bot no tiene una propiedad \"message\"');}}_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);console.error(_context2.t0);case 10:case\"end\":return _context2.stop();}},_callee2,null,[[0,7]]);}));return function sendMessageToBackend(_x2){return _ref3.apply(this,arguments);};}();useEffect(function(){if(messagesContainerRef.current){messagesContainerRef.current.scrollIntoView({behavior:'smooth',block:'end'});}},[messages]);var handleRedirect=function handleRedirect(){navigate('/ChatbotApp.js');};return/*#__PURE__*/_jsxs(\"div\",{className:styles['chatbot-container'],children:[/*#__PURE__*/_jsxs(\"div\",{id:\"messages-container\",className:styles['messages-container'],children:[messages.map(function(message,index){return/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(styles['message'],\" \").concat(message.sender==='user'?styles['user']:styles['bot']),style:{backgroundColor:message.color},children:message.sender==='bot'?/*#__PURE__*/_jsx(TypingText,{text:message.text}):/*#__PURE__*/_jsx(\"span\",{className:styles['message-text'],children:message.text})},index);}),/*#__PURE__*/_jsx(\"div\",{ref:messagesContainerRef})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSendMessage,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"message\",placeholder:\"Escribe un mensaje...\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Enviar\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleRedirect,children:\"Ir a ChatbotApp\"})]});};var App=function App(){return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(\"div\",{className:styles['App'],children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Chatbot\"}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Chatbot,{})}),/*#__PURE__*/_jsx(Route,{path:\"/ChatbotApp.js\",element:/*#__PURE__*/_jsx(ChatbotApp,{})})]})]})});};export default App;//prueba","map":{"version":3,"names":["ChatbotApp","React","useState","useEffect","useRef","BrowserRouter","Router","Route","Routes","useNavigate","styles","axios","Fragment","_Fragment","jsx","_jsx","jsxs","_jsxs","TypingText","_ref","text","_useState","_useState2","_slicedToArray","displayText","setDisplayText","currentIndex","typingTimer","setInterval","prevText","length","clearInterval","substring","children","Chatbot","navigate","_useState3","sender","_useState4","messages","setMessages","messagesContainerRef","handleSendMessage","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","event","inputMessage","messageWithLineBreak","wrap","_callee$","_context","prev","next","preventDefault","target","message","value","trim","concat","_toConsumableArray","reset","sendMessageToBackend","t0","console","error","stop","_x","apply","arguments","_ref3","_callee2","response","botResponse","_callee2$","_context2","post","sent","status","data","prevMessages","_x2","current","scrollIntoView","behavior","block","handleRedirect","className","id","map","index","style","backgroundColor","color","ref","onSubmit","type","name","placeholder","onClick","App","path","element"],"sources":["/home/live/visualstudio/chatbot_react/chatbot_django_react/chatbot-app/src/App.js"],"sourcesContent":["import ChatbotApp from './ChatbotApp';\nimport React, { useState, useEffect, useRef } from 'react';\nimport { BrowserRouter as Router, Route, Routes, useNavigate } from 'react-router-dom';\nimport styles from './styles/Chatbot.module.css';\nimport axios from 'axios';\n\nconst TypingText = ({ text }) => {\n  const [displayText, setDisplayText] = useState('');\n\n  useEffect(() => {\n    let currentIndex = 0;\n    const typingTimer = setInterval(() => {\n      setDisplayText((prevText) => {\n        if (currentIndex >= text.length) {\n          clearInterval(typingTimer);\n          return prevText;\n        }\n        currentIndex++;\n        return text.substring(0, currentIndex);\n      });\n    }, 100);\n\n    return () => {\n      clearInterval(typingTimer);\n    };\n  }, [text]);\n\n  return <>{displayText}</>;\n};\n\nconst Chatbot = () => {\n  const navigate = useNavigate();\n\n  const [messages, setMessages] = useState([\n    { text: '¡Bienvenido al chatbot!', sender: 'bot' },\n  ]);\n\n  const messagesContainerRef = useRef(null);\n\n  const handleSendMessage = async (event) => {\n    event.preventDefault();\n    const inputMessage = event.target.message.value;\n    if (inputMessage.trim() !== '') {\n      const messageWithLineBreak = inputMessage + '\\n';\n      setMessages([...messages, { text: messageWithLineBreak, sender: 'user' }]);\n      event.target.reset();\n\n      try {\n        await sendMessageToBackend(inputMessage);\n      } catch (error) {\n        console.error(error);\n      }\n    }\n  };\n\n  const sendMessageToBackend = async (message) => {\n    try {\n      const response = await axios.post('http://localhost:8000/chat/send-message/', {\n        message: message,\n      });\n\n      if (response.status === 200) {\n        const botResponse = response.data.message;\n        if (botResponse) {\n          setMessages((prevMessages) => [\n            ...prevMessages,\n            { text: botResponse, sender: 'bot' },\n          ]);\n        } else {\n          console.error('La respuesta del bot no tiene una propiedad \"message\"');\n        }\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  useEffect(() => {\n    if (messagesContainerRef.current) {\n      messagesContainerRef.current.scrollIntoView({ behavior: 'smooth', block: 'end' });\n    }\n  }, [messages]);\n\n  const handleRedirect = () => {\n    navigate('/ChatbotApp.js');\n  };\n\n  return (\n    <div className={styles['chatbot-container']}>\n      <div id=\"messages-container\" className={styles['messages-container']}>\n        {messages.map((message, index) => (\n          <div\n            key={index}\n            className={`${styles['message']} ${message.sender === 'user' ? styles['user'] : styles['bot']}`}\n            style={{ backgroundColor: message.color }}\n          >\n            {message.sender === 'bot' ? (\n              <TypingText text={message.text} />\n            ) : (\n              <span className={styles['message-text']}>{message.text}</span>\n            )}\n          </div>\n        ))}\n        <div ref={messagesContainerRef} />\n      </div>\n      <form onSubmit={handleSendMessage}>\n        <input type=\"text\" name=\"message\" placeholder=\"Escribe un mensaje...\" />\n        <button type=\"submit\">Enviar</button>\n      </form>\n      <button onClick={handleRedirect}>Ir a ChatbotApp</button>\n    </div>\n  );\n};\n\nconst App = () => {\n  return (\n    <Router>\n      <div className={styles['App']}>\n        <h1>Chatbot</h1>\n        <Routes>\n          <Route path=\"/\" element={<Chatbot />} />\n          <Route path=\"/ChatbotApp.js\" element={<ChatbotApp />} />\n        </Routes>\n      </div>\n    </Router>\n  );\n};\n\nexport default App;\n\n//prueba"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}